{% extends "layouts/base.html" %}

{% block title %} Results {% endblock title %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}
<h2>Results</h2>
<hr>
<div class="col d-flex justify-content-center">
<h2>Final Ranking 
  <small class="description"></small>
</h2>
</div>
<div class="row">
  {% for tstate in tevent.get_final_tstate.all() %}
    {% include "beachhandball/tournamentevent/_tournament_state_final_ranking.html" %}
  {% else %}
  {% endfor %}
</div>
<hr>
<div class="row">
  <div class="col-md-4">
    <div class="card">
        <div class="card-header card-header-success card-header-icon">
          <div class="card-icon">
            <i class="material-icons">sports_handball</i>
          </div>
          <h4 class="card-title">Best Offense Player:</h4>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Score</th>
                </tr>
              </thead>
              <tbody>
              {% for pstat in playerstats_offense.all()[:10] %}
                <tr>
                  <td>{{ loop.index }}</td>
                  <td>{{ pstat.player.name }}, {{ pstat.player.first_name }} ({{ pstat.player.team.name }})</td>
                  <td>{{ pstat.score }}</td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>
          
            
        </div>
    </div>
  </div>


  <div class="col-md-4">
    <div class="card">
        <div class="card-header card-header-danger card-header-icon">
          <div class="card-icon">
            <i class="material-icons">block</i>
          </div>
          <h4 class="card-title">Best Defense Player:</h4>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Blocks</th>
                </tr>
              </thead>
              <tbody>
              {% for pstat in playerstats_defense.all()[:10] %}
                <tr>
                  <td>{{ loop.index }}</td>
                  <td>{{ pstat.player.name }}, {{ pstat.player.first_name }} ({{ pstat.player.team.name }})</td>
                  <td>{{ pstat.block_success }}</td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>
          
            
        </div>
    </div>
  </div>


  <div class="col-md-4">
    <div class="card">
        <div class="card-header card-header-info card-header-icon">
          <div class="card-icon">
            <i class="material-icons">accessibility</i>
          </div>
          <h4 class="card-title">Best Goalkeeper:</h4>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Saves</th>
                </tr>
              </thead>
              <tbody>
              {% for pstat in playerstats_goalie.all()[:10] %}
                <tr>
                  <td>{{ loop.index }}</td>
                  <td>{{ pstat.player.name }}, {{ pstat.player.first_name }} ({{ pstat.player.team.name }})</td>
                  <td>{{ pstat.goal_keeper_success }}</td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>
          
            
        </div>
    </div>
  </div>
</div>

<div class="row">
  <form action="{{ url('recalc_global_stats', args=[tevent.id]) }}" method='GET'>
    <button type='submit' class="btn btn-primary">Recalc Stats</button>
  </form>
</div>


{% endblock content %}

{% block javascripts %}

<script>
  $(document).ready(function() {
  });
</script>

{% endblock javascripts %}